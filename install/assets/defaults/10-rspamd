#!/usr/bin/with-contenv bash

### Set Defaults
ANTIVIRUS_ACTION=${ANTIVIRUS_ACTION:-"reject"}
ANTIVIRUS_ATTACHMENTS_ONLY=${ANTIVIRUS_ATTACHMENTS_ONLY:-"FALSE"}
ANTIVIRUS_LOG_CLEAN=${ANTIVIRUS_LOG_CLEAN:-"TRUE"}
ANTIVIRUS_MAX_SIZE=${ANTIVIRUS_MAX_SIZE:-20000000}
ANTIVIRUS_TYPE=${ANTIVIRUS_TYPE:-"clamav"}
BAYESIAN_AUTOLEARN=${BAYESIAN_AUTOLEARN:-"TRUE"}
BAYESIAN_AUTOLEARN_CHECK_BALANCE=${BAYESIAN_AUTOLEARN_CHECK_BALANCE:-"TRUE"}
BAYESIAN_AUTOLEARN_HAM_THRESHOLD=${BAYESIAN_AUTOLEARN_HAM_THRESHOLD:-"-0.5"}
BAYESIAN_AUTOLEARN_MIN_BALANCE=${BAYESIAN_AUTOLEARN_MIN_BALANCE:-"0.9"}
BAYESIAN_AUTOLEARN_SPAM_THRESHOLD=${BAYESIAN_AUTOLEARN_SPAM_THRESHOLD:-"6.0"}
BAYESIAN_EXPIRE=${BAYESIAN_EXPIRE:-315360000}
BAYESIAN_MIN_LEARNS=${BAYESIAN_MIN_LEARNS:-1}
BAYESIAN_NEW_SCHEMA=${BAYESIAN_NEW_SCHEMA:-"TRUE"}
BAYESIAN_SIGNATURES=${BAYESIAN_SIGNATURES:-"TRUE"}
BAYESIAN_STORE_STOKENS=${BAYESIAN_STORE_STOKENS:-"TRUE"}
CLAMAV_HOST=${CLAMAV_HOST:-"clamav"}
CLAMAV_PORT=${CLAMAV_PORT:-"3310"}
CONFIG_PATH=${CONFIG_PATH:-"/config/"}
CONTROLLER_COUNT=${CONTROLLER_COUNT:-2}
CONTROLLER_LISTEN_IP=${CONTROLLER_LISTEN_IP:-"*"}
CONTROLLER_LISTEN_PORT=${CONTROLLER_LISTEN_PORT:-"11334"}
CONTROLLER_PASS=${CONTROLLER_PASS:-"admin"}
CONTROLLER_SECURE_IPS=${CONTROLLER_SECURE_IPS:-"127.0.0.1,::1,172.16.0.0/12"}
DKIM_KEY_SIZE=${DKIM_KEY_SIZE:-"2048"}
DKIM_SELECTOR=${DKIM_SELECTOR:-"$(cat /dev/urandom | tr -dc 'a-zA-Z0-9' | fold -w 8 | head -n 1)"}
ENABLE_ARC=${ENABLE_ARC:-"TRUE"}
ENABLE_ANTIVIRUS=${ENABLE_ANTIVIRUS:-"TRUE"}
ENABLE_CONTROLLER=${ENABLE_CONTROLLER:-"TRUE"}
ENABLE_DMARC=${ENABLE_DMARC:-"TRUE"}
ENABLE_DKIM=${ENABLE_DKIM:-"TRUE"}
ENABLE_GREYLIST=${ENABLE_GREYLIST:-"TRUE"}
ENABLE_MILTER=${ENABLE_MILTER:-"TRUE"}
ENABLE_MX_CHECK=${ENABLE_MX_CHECK:-"TRUE"}
ENABLE_PHISHING_CHECK=${ENABLE_PHISHING_CHECK:-"TRUE"}
ENABLE_SPAMTRAP=${ENABLE_SPAMTRAP:-"TRUE"}
ENABLE_SPF=${ENABLE_SPF:-"TRUE"}
ENABLE_URL_REPUTATION=${ENABLE_URL_REPUTATION:-"TRUE"}
ENABLE_URL_TAGS=${ENABLE_URL_TAGS:-"TRUE"}
LOCAL_IPS=${LOCAL_IPS:-"127.0.0.0/8, ::1, 172.16.0.0/12"}
LOG_CONSOLE_COLORIZE=${LOG_CONSOLE_COLORIZE:-"TRUE"}
LOG_FILE=${LOG_FILE:-"rspamd.log"}
LOG_LEVEL=${LOG_LEVEL:-"info"} # error,warning,info,debug
LOG_LOCATION=${LOG_LOCATION:-"/logs/"}
LOG_TYPE=${LOG_TYPE:-"FILE"}
LOG_URLS=${LOG_URLS:-"FALSE"}
LOG_USEC=${LOG_USEC:-"FALSE"}
MILTER_EXTENDED_SPAM_HEADERS=${MILTER_EXTENDED_SPAM_HEADERS:-"TRUE"}
METRICS_ADD_HEADER=${METRICS_ADD_HEADER:-"6"}
METRICS_GREYLIST=${METRICS_GREYLIST:-"4"}
METRICS_REJECT=${METRICS_REJECT:-"15"}
NAMESERVER=${NAMESERVER:-"127.0.0.1"}
PHISHING_ENABLE_OPENPHISH=${PHISHING_ENABLE_OPENPHISH:-"TRUE"}
PHISHING_ENABLE_PHISHTANK=${PHISHING_ENABLE_PHISHTANK:-"TRUE"}
PHISHING_OPENPHISH_FEED=${PHISHING_OPENPHISH_FEED:-"https://www.openphish.com/feed.txt"}
PHISHING_OPENPHISH_PREMIUM=${PHISHING_OPENPHISH_PREMIUM:-"FALSE"}
REDIS_DB=${REDIS_DB:-"7"}
REDIS_HOST=${REDIS_HOST:-"rspamd-redis"}
REDIS_PORT=${REDIS_PORT:-"6379"}
REDIS_TIMEOUT=${REDIS_TIMEOUT:-"3s"}
RSPAMD_DATA_LOCATION=${RSPAMD_DATA_LOCATION:-"/data/rspamd"}
SETUP_TYPE=${SETUP_TYPE:-"AUTO"}
SPAMTRAP_ACTION=${SPAMTRAP_ACTION:-"no action"}
SPAMTRAP_LEARN_FUZZY=${SPAMTRAP_LEARN_FUZZY:-"TRUE"}
SPAMTRAP_LEARN_SPAM=${SPAMTRAP_LEARN_SPAM:-"TRUE"}
SPAMTRAP_SCORE=${SPAMTRAP_SCORE:-"1.0"}
WHITELIST_ANTIVIRUS=${WHITELIST_ANTIVIRUS:-"antivirus.wl"}
WORKER_FUZZY_ALLOW_UPDATE_IPS=${WORKER_FUZZY_ALLOW_UPDATE_IPS:-"127.0.0.1,::1"}
WORKER_FUZZY_COUNT=${WORKER_FUZZY_COUNT:-2}
WORKER_FUZZY_EXPIRE=${WORKER_FUZZY_EXPIRE:-"90d"}
WORKER_LISTEN_IP=${WORKER_LISTEN_IP:-"*"}
WORKER_LISTEN_PORT=${WORKER_LISTEN_PORT:-"11333"}
WORKER_PROXY_LISTEN_IP=${WORKER_PROXY_LISTEN_IP:-"*"}
WORKER_PROXY_LISTEN_PORT=${WORKER_PROXY_LISTEN_PORT:-"11332"}
WORKER_PROXY_SPAM_HEADER=${WORKER_PROXY_SPAM_HEADER:-"X-Spam-Status"}
WORKER_PROXY_TIMEOUT=${WORKER_PROXY_TIMEOUT:-"120s"}

DB_HOST=${DB_HOST:-${REDIS_HOST}}
DB_PORT=${DB_PORT:-${REDIS_PORT}}
